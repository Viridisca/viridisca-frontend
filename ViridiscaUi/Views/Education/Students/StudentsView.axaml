<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ViridiscaUi.ViewModels.Students"
             xmlns:models="using:ViridiscaUi.Domain.Models.Education"
             xmlns:controls="using:Avalonia.Controls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="ViridiscaUi.Views.Education.Students.StudentsView"
             x:DataType="vm:StudentsViewModel">
    
    <Design.DataContext>
        <vm:StudentsViewModel />
    </Design.DataContext>
    
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð¼ Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ -->
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="10">
            <TextBox Grid.Column="0"
                     Text="{Binding SearchTerm}"
                     Watermark="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¸Ð¼ÐµÐ½Ð¸ Ð¸Ð»Ð¸ Ñ„Ð°Ð¼Ð¸Ð»Ð¸Ð¸..."
                     Margin="0,0,10,0"/>
            <Button Grid.Column="1"
                    Command="{Binding AddStudentCommand}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="âž•" Margin="0,0,5,0"/>
                    <TextBlock Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð² -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Students}"
                  SelectedItem="{Binding SelectedStudent}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  GridLinesVisibility="All"
                  HeadersVisibility="All"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  SelectionMode="Single"
                  Margin="10,0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Ð¤Ð˜Ðž" Binding="{Binding FullName}" Width="2*"/>
                <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="2*"/>
                <DataGridTextColumn Header="Ð“Ñ€ÑƒÐ¿Ð¿Ð°" Binding="{Binding GroupName}" Width="*"/>
                <DataGridTextColumn Header="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" Binding="{Binding Status}" Width="*"/>
                <DataGridTemplateColumn Header="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <Button Command="{Binding $parent[DataGrid].((vm:StudentsViewModel)DataContext).ViewStudentDetailsCommand}"
                                        CommandParameter="{Binding}"
                                        ToolTip.Tip="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€">
                                    <TextBlock Text="ðŸ‘ï¸"/>
                                </Button>
                                <Button Command="{Binding $parent[DataGrid].((vm:StudentsViewModel)DataContext).EditStudentCommand}"
                                        CommandParameter="{Binding}"
                                        ToolTip.Tip="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ">
                                    <TextBlock Text="âœï¸"/>
                                </Button>
                                <Button Command="{Binding $parent[DataGrid].((vm:StudentsViewModel)DataContext).DeleteStudentCommand}"
                                        CommandParameter="{Binding}"
                                        ToolTip.Tip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ">
                                    <TextBlock Text="ðŸ—‘ï¸"/>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ÐÐ¸Ð¶Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÐµÐ¹ -->
        <Grid Grid.Row="2" ColumnDefinitions="Auto,*,Auto" Margin="10">
            <Button Grid.Column="0"
                    Command="{Binding PreviousPageCommand}"
                    Content="â¬…ï¸ ÐÐ°Ð·Ð°Ð´"
                    Margin="0,0,10,0"/>
            
            <TextBlock Grid.Column="1"
                       Text="{Binding CurrentPage, StringFormat='Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° {0} Ð¸Ð· {1}'}"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"/>
            
            <Button Grid.Column="2"
                    Command="{Binding NextPageCommand}"
                    Content="Ð’Ð¿ÐµÑ€ÐµÐ´ âž¡ï¸"
                    Margin="10,0,0,0"/>
        </Grid>

        <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
        <Border Grid.Row="0" Grid.RowSpan="3"
                Background="#80000000"
                IsVisible="{Binding IsLoading}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                <TextBlock Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð¾Ð²..." 
                          HorizontalAlignment="Center" 
                          Margin="0,10,0,0"
                          Foreground="White"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl> 