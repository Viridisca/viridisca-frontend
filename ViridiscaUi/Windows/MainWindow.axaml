<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:ViridiscaUi.ViewModels"
        xmlns:reactiveUi="http://reactiveui.net"
        mc:Ignorable="d" d:DesignWidth="1100" d:DesignHeight="750"
        xmlns:material="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
        xmlns:converters="clr-namespace:ViridiscaUi.Converters"
		xmlns:components="clr-namespace:ViridiscaUi.Views.Components"
        x:Class="ViridiscaUi.Windows.MainWindow"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="ViridiscaUi LMS"
        WindowStartupLocation="CenterScreen"
		MinWidth="900" MinHeight="600"
        Background="{DynamicResource BackgroundBrush}">

	<Window.Resources>
		<converters:IconKeyToMaterialKindConverter x:Key="IconKeyConverter" />
		<converters:IconKeyToMaterialKindConverter x:Key="IconKeyToMaterialKindConverter" />
		<converters:BoolToDoubleConverter x:Key="BoolToDoubleConverter" />
		<converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
	</Window.Resources>

	<Window.Styles>
		<!-- Floating Action Button Style -->
		<Style Selector="Button.fab">
			<Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="CornerRadius" Value="28"/>
			<Setter Property="Width" Value="56"/>
			<Setter Property="Height" Value="56"/>
			<Setter Property="FontSize" Value="24"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
					<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Button.fab:pointerover">
			<Setter Property="Background" Value="{DynamicResource SecondaryLightBrush}"/>
			<Setter Property="RenderTransform" Value="scale(1.05)"/>
		</Style>

		<Style Selector="Button.fab:pressed">
			<Setter Property="RenderTransform" Value="scale(0.95)"/>
		</Style>

		<!-- RouterView Style -->
		<Style Selector="reactiveUi|RoutedViewHost">
			<Setter Property="Template">
				<ControlTemplate>
					<ContentPresenter Name="PART_CurrentView" Content="{TemplateBinding Content}" />
				</ControlTemplate>
			</Setter>
		</Style>

		<!-- Scrollbar Styles -->
		<Style Selector="ScrollViewer /template/ ScrollBar">
			<Setter Property="Background" Value="Transparent"/>
		</Style>

		<Style Selector="ScrollViewer /template/ ScrollBar:vertical /template/ Track /template/ Thumb">
			<Setter Property="Background" Value="{DynamicResource BorderBrush}"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>
	</Window.Styles>

	<!-- Main Layout Grid -->
	<Grid RowDefinitions="*,Auto">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="Auto"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>


		<!-- Modern Sidebar Component -->
		<Border Grid.Column="0" Grid.Row="0" IsVisible="{Binding IsLoggedIn}" >
			<components:SidebarComponent />
		</Border> 
		

		<!-- Main Content Area -->
		<Border Grid.Column="1"
                Grid.Row="0"
                Background="{DynamicResource BackgroundBrush}"
                CornerRadius="0"
                Margin="0"
                ClipToBounds="True">

			<!-- Router View Host for Navigation -->
			<reactiveUi:RoutedViewHost Router="{Binding Router}"
                                       HorizontalContentAlignment="Stretch"
                                       VerticalContentAlignment="Stretch">

				<reactiveUi:RoutedViewHost.DefaultContent>

					<!-- Default Home Content with StatisticsCardComponent -->
					<ScrollViewer>
						<StackPanel Margin="40" Spacing="30">
							<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
							<TextBlock Text="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ViridiscaUi LMS!"
                                       FontSize="32" FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource TextPrimaryBrush}"/>

							<!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
							<TextBlock Text="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º"
                                       FontSize="18"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>

							<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º StatisticsCardComponent -->
							<TextBlock Text="üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
                                       FontSize="20"
                                       FontWeight="SemiBold"
                                       Margin="8,0"
                                       Foreground="{DynamicResource TextPrimaryBrush}"/>

							<UniformGrid Columns="4" Margin="0,8">
								<components:StatisticsCardComponent
                                    Title="–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤"
                                    Value="{Binding TotalStudents}"
                                    Icon="üë•"
                                    ShowChange="True"
                                    ChangeText="+12 –∑–∞ –º–µ—Å—è—Ü"
                                    ChangeType="Positive"/>

								<components:StatisticsCardComponent
                                    Title="–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫—É—Ä—Å–æ–≤"
                                    Value="{Binding TotalCourses}"
                                    Icon="üìö"
                                    ShowChange="True"
                                    ChangeText="+3 –∑–∞ –Ω–µ–¥–µ–ª—é"
                                    ChangeType="Positive"/>

								<components:StatisticsCardComponent
                                    Title="–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π"
                                    Value="{Binding TotalTeachers}"
                                    Icon="üë®‚Äçüè´"
                                    ShowChange="True"
                                    ChangeText="–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
                                    ChangeType="Neutral"/>

								<components:StatisticsCardComponent
                                    Title="–ó–∞–¥–∞–Ω–∏–π –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"
                                    Value="{Binding TotalAssignments}"
                                    Icon="üìù"
                                    ShowChange="True"
                                    ChangeText="-5 –∑–∞ –¥–µ–Ω—å"
                                    ChangeType="Negative"/>
							</UniformGrid>

							<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
							<Border Classes="card" Margin="0,20,0,0">
								<StackPanel Spacing="15">
									<TextBlock Text="–û —Å–∏—Å—Ç–µ–º–µ"
                                               FontSize="20"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextPrimaryBrush}"/>
									<TextBlock TextWrapping="Wrap" FontSize="14" LineHeight="22"
                                               Foreground="{DynamicResource TextSecondaryBrush}">
										ViridiscaUi LMS - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
										Avalonia UI –∏ ReactiveUI. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
										–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –≤–∫–ª—é—á–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏, –∫—É—Ä—Å–∞–º–∏,
										–∑–∞–¥–∞–Ω–∏—è–º–∏ –∏ –æ—Ü–µ–Ω–∫–∞–º–∏.
									</TextBlock>

									<StackPanel Orientation="Horizontal" Spacing="20" Margin="0,10,0,0">
										<TextBlock Text="{Binding AppVersion, StringFormat='üöÄ –í–µ—Ä—Å–∏—è: {0}'}"
                                                   FontSize="12"
                                                   Foreground="{DynamicResource TextMutedBrush}"/>
										<TextBlock Text="‚ö° –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞"
                                                   FontSize="12"
                                                   Foreground="{DynamicResource SuccessBrush}"/>
										<TextBlock Text="{Binding OnlineUsersCount, StringFormat='üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω: {0}'}"
                                                   FontSize="12"
                                                   Foreground="{DynamicResource TextMutedBrush}"/>
									</StackPanel>
								</StackPanel>
							</Border>
						</StackPanel>
					</ScrollViewer>

				</reactiveUi:RoutedViewHost.DefaultContent>

			</reactiveUi:RoutedViewHost>

		</Border>

		<!-- Status Bar -->
		<Border Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" Classes="status-bar">
			<components:StatusBarView DataContext="{Binding StatusBar}" />
		</Border> 

	</Grid>
</Window>
